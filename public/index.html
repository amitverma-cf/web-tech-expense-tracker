<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ExpenseTrack</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Halant:wght@300;400;500;600;700&family=Nunito+Sans:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
  
  <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  
  <script src="/chart.js"></script>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            gray: {
              50: '#f9fafb',
              100: '#f3f4f6',
              200: '#e5e7eb',
              300: '#d1d5db',
              400: '#9ca3af',
              500: '#6b7280',
              600: '#4b5563',
              700: '#374151',
              800: '#262626', // Card Background
              900: '#1D1D1D', // Main Background
            },
            primary: {
              50: '#fdf8f6',
              100: '#f2e8e0',
              200: '#eaddd0',
              300: '#dcbfae',
              400: '#cba085',
              500: '#BA875C', // Accent 1
              600: '#9e6d46',
              700: '#845638',
              800: '#6b442e',
              900: '#553526',
            },
            secondary: {
              50: '#f4f6f5',
              100: '#e6e9e7',
              200: '#d0d6d2',
              300: '#b0b9b4',
              400: '#8a9891',
              500: '#596B5F', // Accent 2
              600: '#46554b',
              700: '#38443c',
              800: '#2d3630',
              900: '#242b26',
            },
            red: {
              50: '#fdf2f2',
              100: '#fde8e8',
              200: '#fbd5d5',
              300: '#f8b4b4',
              400: '#f28b8b',
              500: '#C06060', // Muted Red
              600: '#A64D4D',
              700: '#8C3B3B',
              800: '#732D2D',
              900: '#4A1A1A',
            },
            customText: '#D1CAC2',
          },
          fontFamily: {
            sans: ['Nunito Sans', 'sans-serif'],
            serif: ['Halant', 'serif'],
          }
        }
      }
    }
  </script>
  <style>
    body {
      background-color: #1D1D1D;
      color: #D1CAC2;
    }
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #1D1D1D; 
    }
    ::-webkit-scrollbar-thumb {
      background: #374151; 
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #4b5563; 
    }
  </style>
</head>
<body class="antialiased bg-gray-900 text-customText font-sans">

  <aside id="logo-sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0 bg-gray-800" aria-label="Sidebar">
    <div class="h-full px-3 py-4 overflow-y-auto bg-gray-800">
      <a href="#" class="flex items-center ps-2.5 mb-8">
        <span class="self-center text-2xl font-semibold whitespace-nowrap text-primary-500 font-serif">ExpenseTrack</span>
      </a>
      <ul class="space-y-2 font-medium">
        <li>
          <button type="button" class="nav-btn flex items-center w-full p-2 text-customText rounded-lg hover:bg-gray-700 group transition-colors duration-200" data-tab="dashboard">
            <i class="lni lni-grid-alt text-xl text-gray-400 transition duration-75 group-hover:text-primary-500"></i>
            <span class="ms-3">Dashboard</span>
          </button>
        </li>
        <li>
          <button type="button" class="nav-btn flex items-center w-full p-2 text-customText rounded-lg hover:bg-gray-700 group transition-colors duration-200" data-tab="transactions">
            <i class="lni lni-wallet text-xl text-gray-400 transition duration-75 group-hover:text-primary-500"></i>
            <span class="ms-3">Transactions</span>
          </button>
        </li>
        <li>
          <button type="button" class="nav-btn flex items-center w-full p-2 text-customText rounded-lg hover:bg-gray-700 group transition-colors duration-200" data-tab="categories">
            <i class="lni lni-tag text-xl text-gray-400 transition duration-75 group-hover:text-primary-500"></i>
            <span class="ms-3">Categories</span>
          </button>
        </li>
        <li>
          <button type="button" class="nav-btn flex items-center w-full p-2 text-customText rounded-lg hover:bg-gray-700 group transition-colors duration-200" data-tab="budgets">
            <i class="lni lni-target text-xl text-gray-400 transition duration-75 group-hover:text-primary-500"></i>
            <span class="ms-3">Budgets</span>
          </button>
        </li>
        <li>
          <button type="button" class="nav-btn flex items-center w-full p-2 text-customText rounded-lg hover:bg-gray-700 group transition-colors duration-200" data-tab="reports">
            <i class="lni lni-graph text-xl text-gray-400 transition duration-75 group-hover:text-primary-500"></i>
            <span class="ms-3">Reports</span>
          </button>
        </li>
      </ul>
    </div>
  </aside>

  <div class="p-4 sm:ml-64 min-h-screen pb-20 sm:pb-4">
    <div class="p-4 mt-4">
      
      <div id="dashboard" class="tab-content animate__animated animate__fadeIn">
        <div class="mb-8">
          <h1 class="text-4xl font-bold text-primary-500 font-serif mb-2">Financial Overview</h1>
          <p class="text-gray-400">Track your expenses and income with professional insights</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
          <div class="p-6 bg-gray-800 rounded-lg shadow hover:bg-gray-750 transition-all duration-300 animate__animated animate__fadeInUp" style="animation-delay: 0.1s;">
            <h5 class="mb-2 text-sm font-bold tracking-tight text-gray-400 uppercase">Total Balance</h5>
            <div class="flex items-center">
              <p id="balance" class="text-3xl font-bold text-customText">₹0.00</p>
              <span id="balanceArrow" class="ml-3 text-2xl"></span>
            </div>
            <p class="mt-2 text-xs text-gray-500">Updated just now</p>
          </div>
          <div class="p-6 bg-gray-800 rounded-lg shadow hover:bg-gray-750 transition-all duration-300 animate__animated animate__fadeInUp" style="animation-delay: 0.2s;">
            <h5 class="mb-2 text-sm font-bold tracking-tight text-gray-400 uppercase">Total Income</h5>
            <p id="income" class="text-3xl font-bold text-secondary-500">₹0.00</p>
            <p class="mt-2 text-xs text-gray-500">This month</p>
          </div>
          <div class="p-6 bg-gray-800 rounded-lg shadow hover:bg-gray-750 transition-all duration-300 animate__animated animate__fadeInUp" style="animation-delay: 0.3s;">
            <h5 class="mb-2 text-sm font-bold tracking-tight text-gray-400 uppercase">Total Expenses</h5>
            <p id="expenses" class="text-3xl font-bold text-red-500">₹0.00</p>
            <p class="mt-2 text-xs text-gray-500">This month</p>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="p-6 bg-gray-800 rounded-lg shadow animate__animated animate__fadeInUp" style="animation-delay: 0.4s;">
            <h5 class="mb-4 text-xl font-bold text-customText font-serif pl-3">Spending Analytics</h5>
            <div class="relative h-64 w-full">
              <canvas id="analyticsChart"></canvas>
            </div>
          </div>
          <div class="p-6 bg-gray-800 rounded-lg shadow animate__animated animate__fadeInUp" style="animation-delay: 0.5s;">
            <h5 class="mb-4 text-xl font-bold text-customText font-serif pl-3">Recent Transactions</h5>
            <div id="recentTransactions" class="space-y-3">
            </div>
          </div>
        </div>
      </div>

      <div id="transactions" class="tab-content hidden animate__animated animate__fadeIn">
        <div class="mb-8">
          <h1 class="text-4xl font-bold text-primary-500 font-serif mb-2">Transactions</h1>
          <p class="text-gray-400">Manage all your income and expenses</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div class="lg:col-span-1">
            <div class="p-6 bg-gray-800 rounded-lg shadow">
              <h5 class="mb-6 text-xl font-bold text-customText font-serif pl-3">Add New</h5>
              <form id="transactionForm" class="space-y-4">
                <div>
                  <label for="type" class="block mb-2 text-sm font-medium text-gray-400">Type</label>
                  <select id="type" class="bg-gray-700 text-customText text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" required>
                    <option value="expense">Expense</option>
                    <option value="income">Income</option>
                  </select>
                </div>
                <div>
                  <label for="amount" class="block mb-2 text-sm font-medium text-gray-400">Amount</label>
                  <input type="number" id="amount" step="0.01" class="bg-gray-700 text-customText text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" placeholder="0.00" required>
                </div>
                <div>
                  <label for="date" class="block mb-2 text-sm font-medium text-gray-400">Date</label>
                  <input type="date" id="date" class="bg-gray-700 text-customText text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" required>
                </div>
                <div id="categoryContainer">
                  <label for="category" class="block mb-2 text-sm font-medium text-gray-400">Category</label>
                  <select id="category" class="bg-gray-700 text-customText text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" required>
                    <option value="">Select a category</option>
                  </select>
                </div>
                <div>
                  <label for="description" class="block mb-2 text-sm font-medium text-gray-400">Description</label>
                  <input type="text" id="description" class="bg-gray-700 text-customText text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" placeholder="Description">
                </div>
                <div class="flex items-center mb-4">
                  <input id="recurring" type="checkbox" class="w-4 h-4 text-primary-600 bg-gray-700 border-gray-600 rounded focus:ring-primary-500 focus:ring-2">
                  <label for="recurring" class="ms-2 text-sm font-medium text-gray-400">Recurring Transaction</label>
                </div>
                <button type="submit" class="w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center transition-colors duration-200">Add Transaction</button>
              </form>
            </div>
          </div>

          <div class="lg:col-span-2">
            <div class="p-6 bg-gray-800 rounded-lg shadow">
              <h5 class="mb-6 text-xl font-bold text-customText font-serif pl-3">History</h5>
              <div id="allTransactions" class="space-y-3 max-h-[600px] overflow-y-auto pr-2">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="categories" class="tab-content hidden animate__animated animate__fadeIn">
        <div class="mb-8">
          <h1 class="text-4xl font-bold text-primary-500 font-serif mb-2">Categories</h1>
          <p class="text-gray-400">Organize your transactions efficiently</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="p-6 bg-gray-800 rounded-lg shadow">
            <h5 class="mb-6 text-xl font-bold text-customText font-serif pl-3">Add Category</h5>
            <form id="categoryForm" class="space-y-4">
              <div>
                <label for="catName" class="block mb-2 text-sm font-medium text-gray-400">Category Name</label>
                <input type="text" id="catName" class="bg-gray-700 text-customText text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" placeholder="e.g., Food & Dining" required>
              </div>
              <button type="submit" class="w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center transition-colors duration-200">Add Category</button>
            </form>
          </div>
          
          <div class="p-6 bg-gray-800 rounded-lg shadow">
            <h5 class="mb-6 text-xl font-bold text-customText font-serif pl-3">All Categories</h5>
            <div id="allCategories" class="space-y-2">
            </div>
          </div>
        </div>
      </div>

      <div id="budgets" class="tab-content hidden animate__animated animate__fadeIn">
        <div class="mb-8">
          <h1 class="text-4xl font-bold text-primary-500 font-serif mb-2">Budgets</h1>
          <p class="text-gray-400">Set and track your spending limits</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div class="lg:col-span-1">
            <div class="p-6 bg-gray-800 rounded-lg shadow">
              <h5 class="mb-6 text-xl font-bold text-customText font-serif pl-3">Create Budget</h5>
              <form id="budgetForm" class="space-y-4">
                <div>
                  <label for="budgetCategory" class="block mb-2 text-sm font-medium text-gray-400">Category</label>
                  <select id="budgetCategory" class="bg-gray-700 text-customText text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" required>
                    <option value="">Select a category</option>
                  </select>
                </div>
                <div>
                  <label for="budgetLimit" class="block mb-2 text-sm font-medium text-gray-400">Limit Amount</label>
                  <input type="number" id="budgetLimit" step="0.01" class="bg-gray-700 text-customText text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" placeholder="0.00" required>
                </div>
                <div>
                  <label for="budgetPeriod" class="block mb-2 text-sm font-medium text-gray-400">Period</label>
                  <select id="budgetPeriod" class="bg-gray-700 text-customText text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" required>
                    <option value="monthly">Monthly</option>
                    <option value="weekly">Weekly</option>
                    <option value="yearly">Yearly</option>
                  </select>
                </div>
                <button type="submit" class="w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center transition-colors duration-200">Create Budget</button>
              </form>
            </div>
          </div>

          <div class="lg:col-span-2">
            <div id="allBudgets" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            </div>
          </div>
        </div>
      </div>

      <div id="reports" class="tab-content hidden animate__animated animate__fadeIn">
        <div class="mb-8">
          <h1 class="text-4xl font-bold text-primary-500 font-serif mb-2">Reports & Insights</h1>
          <p class="text-gray-400">Analyze your financial patterns</p>
        </div>

        <div class="grid grid-cols-1 gap-6">
          <div class="p-6 bg-gray-800 rounded-lg shadow">
            <h5 class="mb-6 text-xl font-bold text-customText font-serif pl-3">Monthly Report</h5>
            <div class="relative h-80 w-full">
              <canvas id="monthlyChart"></canvas>
            </div>
          </div>
          
          <div class="p-6 bg-gray-800 rounded-lg shadow flex items-center justify-between">
            <div>
              <h5 class="text-xl font-bold text-customText font-serif">Export Data</h5>
              <p class="text-sm text-gray-400">Download your transaction history as CSV</p>
            </div>
            <button onclick="window.location.href='/reports/csv'" class="text-white bg-secondary-600 hover:bg-secondary-700 focus:ring-4 focus:outline-none focus:ring-secondary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center">
              <i class="lni lni-download mr-2"></i>
              Download CSV
            </button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="fixed bottom-0 left-0 z-50 w-full h-16 bg-gray-800 sm:hidden">
    <div class="grid h-full max-w-lg grid-cols-5 mx-auto font-medium">
      <button type="button" class="nav-btn-mobile inline-flex flex-col items-center justify-center px-5 hover:bg-gray-700 group text-primary-500" data-tab="dashboard">
        <i class="lni lni-grid-alt text-xl mb-1 group-hover:text-primary-500"></i>
        <span class="text-[10px] group-hover:text-primary-500">Home</span>
      </button>
      <button type="button" class="nav-btn-mobile inline-flex flex-col items-center justify-center px-5 hover:bg-gray-700 group text-gray-400" data-tab="transactions">
        <i class="lni lni-wallet text-xl mb-1 group-hover:text-primary-500"></i>
        <span class="text-[10px] group-hover:text-primary-500">Trans</span>
      </button>
      <button type="button" class="nav-btn-mobile inline-flex flex-col items-center justify-center px-5 hover:bg-gray-700 group text-gray-400" data-tab="categories">
        <i class="lni lni-tag text-xl mb-1 group-hover:text-primary-500"></i>
        <span class="text-[10px] group-hover:text-primary-500">Cats</span>
      </button>
      <button type="button" class="nav-btn-mobile inline-flex flex-col items-center justify-center px-5 hover:bg-gray-700 group text-gray-400" data-tab="budgets">
        <i class="lni lni-target text-xl mb-1 group-hover:text-primary-500"></i>
        <span class="text-[10px] group-hover:text-primary-500">Budget</span>
      </button>
      <button type="button" class="nav-btn-mobile inline-flex flex-col items-center justify-center px-5 hover:bg-gray-700 group text-gray-400" data-tab="reports">
        <i class="lni lni-graph text-xl mb-1 group-hover:text-primary-500"></i>
        <span class="text-[10px] group-hover:text-primary-500">Report</span>
      </button>
    </div>
  </div>

  <div id="budgetAlertModal" class="fixed inset-0 z-[60] hidden items-center justify-center bg-black/80 backdrop-blur-sm transition-opacity duration-300">
    <div class="relative w-full max-w-md p-8 bg-gray-800 rounded-2xl shadow-2xl transform transition-all animate__animated animate__zoomIn">
      <div class="text-center">
        <div class="mx-auto flex items-center justify-center h-24 w-24 rounded-full bg-red-900/30 mb-6 animate__animated animate__pulse animate__infinite">
          <i class="lni lni-warning text-6xl text-red-500"></i>
        </div>
        <h3 class="mb-4 text-3xl font-bold text-white font-serif tracking-wide">Budget Exceeded!</h3>
        <p id="budgetAlertMessage" class="text-xl text-gray-300 mb-2">You've exceeded your budget!</p>
        <div class="bg-gray-900/50 rounded-lg p-4 mb-8">
            <p id="budgetAlertDetails" class="text-lg text-red-400 font-mono font-bold">Spent: ₹0.00 / Limit: ₹0.00</p>
        </div>
        <button onclick="closeBudgetAlert()" class="w-full text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:ring-4 focus:outline-none focus:ring-red-900 font-bold rounded-xl text-lg px-5 py-4 text-center shadow-lg transform transition hover:scale-[1.02]">
          Acknowledge
        </button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>

  <script src="index.js"></script>
</body>
</html>